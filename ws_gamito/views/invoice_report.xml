<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Original addons/account/views/report_invoice.xml -->
        <template id="report_invoice_document_custom" inherit_id="account.report_invoice_document">

            <!-- Mostrar fecha de vencimiento solo para facturas publicadas -->
            <xpath expr="//div[@name='due_date']" position="attributes">
                <attribute name="t-if">o.invoice_date_due and o.move_type in ('out_invoice', 'out_refund') and o.state == 'posted'</attribute>
            </xpath>

            <!-- AÃ±adir el modo de pago junto a la referencia de pago -->
		<xpath expr="//div[@id='total_payment_term_details_table']" position="replace">
			<div id="total_payment_term_details_table" class="row">
			  <div t-attf-class="#{'col-7' if report_type != 'html' else 'col-sm-7 col-md-6'} mt-2 mb-2">
				<table class="table table-sm" style="page-break-inside: avoid;">
				  <th class="border-black text-start">Due Date</th>
				  <th class="border-black text-end">Amount Due</th>
				  <th t-if="o.show_discount_details" class="border-black text-end">Discount</th>
				  <t t-foreach="payment_term_details" t-as="term">
					<tr>
					  <td t-esc="term.get('date')" class="text-start"/>
					  <td t-options='{"widget": "monetary", "display_currency": o.currency_id}'
						  t-esc="term.get('amount')" class="text-end"/>
					  <td t-if="term.get('discount_date')" class="text-end">
						<span t-options='{"widget": "monetary", "display_currency": o.currency_id}'
							  t-esc="term.get('discount_amount_currency')"/> if paid before
						<span t-esc="term.get('discount_date')"/>
					  </td>
					</tr>
				  </t>
				</table>
			  </div>
			</div>
		  </xpath>		

        </template>
        
    </data>
</odoo>