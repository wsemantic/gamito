<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Original addons/account/views/report_invoice.xml -->
        <template id="report_invoice_document_custom" inherit_id="account.report_invoice_document">

            <!-- Mostrar fecha de vencimiento solo para facturas publicadas -->
            <xpath expr="//div[@name='due_date']" position="attributes">
                <attribute name="t-if">o.invoice_date_due and o.move_type in ('out_invoice', 'out_refund') and o.state == 'posted'</attribute>
            </xpath>

            <!-- Añadir el modo de pago junto a la referencia de pago -->
		  <xpath expr="//div[@id='total_payment_term_details_table']" position="before">
			<p t-if="o.payment_mode_id" class="mt-3">
			  <strong>Método de pago:</strong>
			  <span t-field="o.payment_mode_id.name"/>
			  <t t-if="o.payment_mode_id.payment_method_id">
				<span class="text-muted">
				  (<span t-field="o.payment_mode_id.payment_method_id.name"/>)
				</span>
			  </t>
			</p>
		  </xpath>			

        </template>
        
    </data>
</odoo>