<odoo>
    <data>

        <!-- Hereda la vista del reporte de pedido de ventas -->
        <template id="report_saleorder_document_custom" inherit_id="sale.report_saleorder_document">

            <!-- Modifica el bloque donde se muestra la dirección -->
            <xpath expr="//t[@t-set='address']" position="replace">
                <t t-set="address">
                    <!-- Mostrar siempre la dirección de envío a la derecha -->
                    <div t-field="doc.partner_shipping_id"
                        t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}' />
                    <p t-if="doc.partner_shipping_id.vat"><t t-out="doc.company_id.account_fiscal_country_id.vat_label or 'Tax ID'"/>: <span t-field="doc.partner_shipping_id.vat"/></p>
                </t>
            </xpath>

            <!-- Modifica el bloque condicional para mostrar la dirección de facturación solo cuando sea diferente -->
            <xpath expr="//t[@t-if='doc.partner_shipping_id == doc.partner_invoice_id and doc.partner_invoice_id != doc.partner_id or doc.partner_shipping_id != doc.partner_invoice_id']" position="replace">
                <t t-if="doc.partner_shipping_id != doc.partner_invoice_id">
                    <!-- Mostrar la dirección de facturación a la izquierda si es diferente de la dirección de envío -->
                    <t t-set="information_block">
                        <div class="row">
                            <div class="col-6">
                                <strong>Invoicing Address:</strong>
                                <div t-field="doc.partner_invoice_id"
                                    t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True, "phone_icons": True}'/>
                            </div>
                        </div>
                    </t>
                </t>
            </xpath>

        </template>

    </data>
</odoo>
